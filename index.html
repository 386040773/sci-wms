<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Sci-wms by acrosby</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Sci-wms</h1>
        <p>Sci-wms: A Python WMS service for geospatial gridded data (Only unstructured FVCOM and ADCIRC grids logically rectangular grids supported)</p>

        <p class="view"><a href="https://github.com/acrosby/sci-wms">View the Project on GitHub <small>acrosby/sci-wms</small></a></p>


        <ul>
          <li><a href="https://github.com/acrosby/sci-wms/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/acrosby/sci-wms/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/acrosby/sci-wms">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>sci-wms</h1>

<h4>A Python WMS service for geospatial gridded data (Only unstructured FVCOM and ADCIRC grids and structured grids officially supported)</h4>

<p><img src="https://raw.github.com/acrosby/sci-wms/master/src/pywms/wms/static/example1.png" alt="Global HYCOM as filled contours"></p>

<h2>System Requirements</h2>

<ul>
<li>&gt;= 4GB RAM But it depends directly on the size and extents of the datasets you will be visualizing.</li>
<li>&gt; 2 CPU (&gt; 4 CPU Better) </li>
<li>Python &gt; Version 2.6</li>
</ul><h2>Roadmap</h2>

<h4>Version 1:</h4>

<ul>
<li>Bug free working implementation of the current dev code</li>
<li>working getcaps</li>
<li>working getmap</li>
<li>working getlegendgraphic for non-autoscaling colormap styles</li>
<li>service based dataset initialization and updating in addition to admin</li>
<li>support for native Adcirc and FVCOM model output meshes</li>
</ul><h4>Version 1.1:</h4>

<ul>
<li>Support for rectilinear and curvilinear grids</li>
<li>some wps functionality</li>
<li>projections other than web mercator</li>
<li>working getlegendgraphic response for the autoscaling colormap styles</li>
<li>server-wide symbolization customization in admin</li>
</ul><h4>Experimental Fork/Branch:</h4>

<ul>
<li>Leverage hardware/opengl rendering for high overhead styles (facets, arrows...)</li>
</ul><h2>Install</h2>

<p>Download the compressed project and unpack anywhere. This is where the installation will live.</p>

<h4>If you have the standard enthought python distribution (epd):</h4>

<p>Install the remaining dependencies:</p>

<pre><code>$easy_install gunicorn
$easy_install greenlet
$easy_install gevent              # or easy_install eventlet
$easy_install django
</code></pre>

<h4>If are not using the enthought python distribution:</h4>

<p>You must have the following python packages installed:</p>

<ul>
<li>django</li>
<li>gunicorn</li>
<li>greenlet</li>
<li>gevent or eventlet</li>
<li>numpy</li>
<li>matplotlib (1.1.0 preferred)</li>
<li>matplotlib basemap (versions 1.0.1)</li>
<li>netCDF4 (Install from the netcdf4-python google code repository if using HDF a recent build of HDF5)</li>
<li>shapely</li>
<li>markdown</li>
</ul><p>sci-wms works with both pip and virtualenv quite happily. If you
have pip installed you can use the following to install many (but not all) of the required modules:</p>

<pre><code>$pip install package
</code></pre>



<p>Similarly if you have setup_tools installed you can use:</p>

<pre><code>$easy_install package
</code></pre>

<p>If you are using virtualenv, just make sure you have the environment
activated before you try to install the packages or point to the environment
with pip on the install command.</p>

<p>You also need to ensure that you have basemap matplotlib toolkit installed:</p>

<pre><code>$wget -o basemap-1.0.1.tar.gz http://sourceforge.net/projects/matplotlib/files/matplotlib-toolkits/basemap-1.0.1/basemap-1.0.1.tar.gz/download
$pip install basemap-1.0.1.tar.gz
</code></pre>

<h2>Run</h2>

<h4>To Start With Django Development Server (on port 7000 for example):</h4>

<pre><code>$cd project_folder/src/pywms

$python manage.py runserver 0.0.0.0:7000   # for local use "localhost:7000"
</code></pre>

<h4>Run with Gunicorn Production WSGI Server:</h4>

<pre><code>$cd project_folder/src/pywms

$gunicorn_django -c config_public.py       # for local use config_local.py (configs use port 7000 by default)
</code></pre>

<p>or</p>

<pre><code>$cd project_folder
$./start_server.sh    # this starts the public server
$./stop_server.sh     # this stops the public server (actually ALL gunicorn_django processes)
</code></pre>

<p>You can edit the gunicorn config file (config_public.py and config_local.py) to specify the port and other
gunicorn server settings.</p>

<p>Can also be run with mod_wsgi/mod_python/etc in Apache. I prefer to proxypass
in Apache or nginx to the gunicorn server because I think its better setup
to handle the kinds of requests the server sees.</p>

<h2>Setup</h2>

<h3>Change password for default user:</h3>

<p>The default username is " <em>sciwmsuser</em> " and its password is " <em>sciwmspassword</em> ". So,
the first thing you should do is login to the administration utility
and change the password or remove the default user and create a new one
for yourself.</p>

<p><em>Caution</em> : Depending on the version of Django you have installed you may have a problem
logging into the admin site, even with the correct password. An easy way solve this problem is to
simply to run the following command to reset the sciwmsuser password from the command line.</p>

<pre><code>$python manage.py changepassword sciwmsuser
</code></pre>

<p>The admin page can be found here:   http://server:port/admin</p>

<p>This admin site is how you will add and remove datasets for the wms server.</p>

<h3>http://server:port/wmstest</h3>

<p>In order for the wmstest page to work you need to add your site (and port) url to the sites list and remove all others. This is <em>important</em> because a request to the <em>wmstest</em> page (or the http://server:port/update page) will
initialize newly added datasets and update datasets that are specified as updateable in the system. If you have a lot of datasets in your server, it may take a while to initialize all of them.
Ensure that there is a dataset_id.nc and dataset_id.domain file in the pywms folder for each of your unstructured datasets before allowing others to use your services. Initialization needs to only be done once
per dataset, and subsequent updates (if required) are quick. Structured grid datasets will only have a dataset_id.nc file in the pywms folder, they do not require the .domain file. If there
is a problem generating the necessary files when adding new datasets, check the <em>sciwms_wms.log</em> file.</p>

<h3>Caveats:</h3>

<p>Look at <a href="https://github.com/acrosby/sci-wms/issues?state=open">https://github.com/acrosby/sci-wms/issues?state=open</a> for a list of known issues and problems.</p>

<h3>Use:</h3>

<p>This wms server is based on a model that has a separate GetCapabilities endpoint and base wms end point
for each dataset added to the server. The datasets are distinguisghed internally by unique dataset id's
provided by the administrator. These id's are also used used in the base wms url as follows.</p>

<pre><code>http://server:port/wms/dataset_id/?REQUEST=GetCapabilities
</code></pre>

<p>There is no server-wide GetCapabilities document, but we may work on getting one installed in the future.</p>

<h2>Description of Styles Parameter:</h2>

<p>STYLES=position1_position2_position3_position4_position5_position6_position7</p>

<h3>Position 1</h3>

<p>This is the style of image to return.
For node variables the options are: pcolor, facets, contours, filledcontours, (vectors or barbs if specifying two variables like LAYERS=u,v)</p>

<p>For cell variables the options are: pcolor, facets, contours, filledcontours, (vectors or barbs if specifying two variables like LAYERS=u,v)</p>

<h3>Position 2</h3>

<p>This is the type of processing to do if the request has a time range specified instead of one time. (Probably won’t be needed for this project, but) The options are either: average or maximum</p>

<h3>Position 3</h3>

<p>This is the colormap to be used. Case-sensitive match to the matplotlib default colormaps. Possible values can be found here: <a href="http://www.scipy.org/Cookbook/Matplotlib/Show_colormaps">http://www.scipy.org/Cookbook/Matplotlib/Show_colormaps</a></p>

<p>To use colormaps that contain an underscore ( “_” ) substitute the underscore for a hyphen ( “-”) in the styles parameter.</p>

<h3>Position 4</h3>

<p>For the color scaling, this value is the lower limit or “cmin”, should be entered as an integer or decimal number. If either cmin or cmax are listed as None then the colormap will autoscale to the available data.</p>

<h3>Position 5</h3>

<p>For color scaling, this value is the upper limit, or “cmax”, should be entered as an integer or decimal number. If either cmin or cmax are listed as None then the colormap will autoscale to the available data.</p>

<h3>Position 6</h3>

<p>This value specifies whether the variable input in LAYERS parameter is in the middle of an unstructured cell or if it is on the node/vertex. Allowable values in this position are either: cell or node</p>

<h3>Position 7</h3>

<p>This is a case-sensitive boolean to say whether or not the absolute value (magnitude) or the actual value should be taken if only one variable is specified in LAYERS=</p>

<p>For instance LAYERS=u will return positive and negative values if the value in Position 7 is set to False, but if it set to True, the magnitude of u will be returned.</p>

<p>Allowable values: True or False
(in the case of vectors, True = autoscaling of vectors, False means no autoscaling of vectors with default scale) If there is a number in this position, the number is taken as the scale. Start with 2 and adjust from there.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/acrosby">acrosby</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>